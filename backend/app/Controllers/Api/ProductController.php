<?php\nnamespace App\Controllers\Api;\n\nuse App\Models\ProductModel;\nuse CodeIgniter\RESTful\ResourceController;\n\nclass ProductController extends ResourceController {\n    protected $modelName = 'App\\Models\\ProductModel';\n    protected $format = 'json';\n\n    public function index() {\n        return $this->respond($this->model->findAll());\n    }\n\n    public function show($id = null) {\n        $product = $this->model->find($id);\n        if (!$product) return $this->failNotFound('Product not found');\n        return $this->respond($product);\n    }\n\n    public function create() {\n        $data = $this->request->getJSON(true);\n        if (empty($data['name'])) return $this->failValidationError('Name is required');\n        $this->model->insert($data);\n        return $this->respondCreated($data);\n    }\n\n    public function update($id = null) {\n        $data = $this->request->getJSON(true);\n        $this->model->update($id, $data);\n        return $this->respond($this->model->find($id));\n    }\n\n    public function delete($id = null) {\n        $this->model->delete($id);\n        return $this->respondDeleted(['id'=>$id]);\n    }\n}\n